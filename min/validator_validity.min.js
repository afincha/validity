/*!
 * Copyright (c) 2014 Andrew Finch

 * Permission is hereby granted, free of charge, to any person obtaining a copy of
 * this software and associated documentation files (the "Software"), to deal in
 * the Software without restriction, including without limitation the rights to
 * use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
 * the Software, and to permit persons to whom the Software is furnished to do so,
 * subject to the following conditions:

 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.

 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
 * FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
 * COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
 * IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
 * CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */

(function(e,t){if(typeof module!=="undefined"){module.exports=t()}else if(typeof define==="function"&&typeof define.amd==="object"){define(t)}else{this[e]=t()}})("validator",function(e){e={version:"3.1.0"};var t=/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/;var n=/^(?!mailto:)(?:(?:https?|ftp):\/\/)?(?:\S+(?::\S*)?@)?(?:(?:(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[0-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))|localhost)(?::\d{2,5})?(?:\/[^\s]*)?$/i;var r=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/;var i=/^(?:[0-9]{9}X|[0-9]{10})$/,s=/^(?:[0-9]{13})$/;var o=/^(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)\.(\d?\d?\d)$/,u=/^::|^::1|^([a-fA-F0-9]{1,4}::?){1,7}([a-fA-F0-9]{1,4})$/;var a={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};var f=/^[a-zA-Z]+$/,l=/^[a-zA-Z0-9]+$/,c=/^-?[0-9]+$/,h=/^(?:-?(?:0|[1-9][0-9]*))$/,p=/^(?:-?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,d=/^[0-9a-fA-F]+$/,v=/^#?([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;e.toString=function(e){if(e===null||typeof e==="undefined"||isNaN(e)&&!e.length){e=""}else if(typeof e==="object"&&e.toString){e=e.toString()}return e+""};e.toDate=function(e){if(Object.prototype.toString.call(e)==="[object Date]"){return e}e=Date.parse(e);return!isNaN(e)?new Date(e):null};e.toFloat=function(e){return parseFloat(e)};e.toInt=function(e,t){return parseInt(e,t||10)};e.toBoolean=function(e,t){if(t){return e==="1"||e==="true"}return e!=="0"&&e!=="false"&&e!==""};e.equals=function(t,n){return t===e.toString(n)};e.contains=function(t,n){return t.indexOf(e.toString(n))>=0};e.matches=function(e,t,n){if(Object.prototype.toString.call(t)!=="[object RegExp]"){t=new RegExp(t,n)}return t.test(e)};e.isEmail=function(e){return t.test(e)};e.isURL=function(e){return e.length<2083&&n.test(e)};e.isIP=function(t,n){n=e.toString(n);if(!n){return e.isIP(t,4)||e.isIP(t,6)}else if(n==="4"){if(!o.test(t)){return false}var r=t.split(".").sort();return r[3]<=255}return n==="6"&&u.test(t)};e.isAlpha=function(e){return f.test(e)};e.isAlphanumeric=function(e){return l.test(e)};e.isNumeric=function(e){return c.test(e)};e.isHexadecimal=function(e){return d.test(e)};e.isHexColor=function(e){return v.test(e)};e.isLowercase=function(e){return e===e.toLowerCase()};e.isUppercase=function(e){return e===e.toUpperCase()};e.isInt=function(e){return h.test(e)};e.isFloat=function(e){return e!==""&&p.test(e)};e.isDivisibleBy=function(t,n){return e.toFloat(t)%e.toInt(n)===0};e.isNull=function(e){return e.length===0};e.isLength=function(e,t,n){return e.length>=t&&(typeof n==="undefined"||e.length<=n)};e.isUUID=function(e,t){var n=a[t?t:"all"];return n&&n.test(e)};e.isDate=function(e){return!isNaN(Date.parse(e))};e.isAfter=function(t,n){var r=e.toDate(n||new Date),i=e.toDate(t);return i&&r&&i>r};e.isBefore=function(t,n){var r=e.toDate(n||new Date),i=e.toDate(t);return i&&r&&i<r};e.isIn=function(t,n){if(!n||typeof n.indexOf!=="function"){return false}if(Object.prototype.toString.call(n)==="[object Array]"){var r=[];for(var i=0,s=n.length;i<s;i++){r[i]=e.toString(n[i])}n=r}return n.indexOf(t)>=0};e.isCreditCard=function(e){var t=e.replace(/[^0-9]+/g,"");if(!r.test(t)){return false}var n=0,i,s,o;for(var u=t.length-1;u>=0;u--){i=t.substring(u,u+1);s=parseInt(i,10);if(o){s*=2;if(s>=10){n+=s%10+1}else{n+=s}}else{n+=s}o=!o}return n%10===0?t:false};e.isISBN=function(t,n){n=e.toString(n);if(!n){return e.isISBN(t,10)||e.isISBN(t,13)}var r=t.replace(/[\s-]+/g,""),o=0,u;if(n==="10"){if(!i.test(r)){return false}for(u=0;u<9;u++){o+=(u+1)*r.charAt(u)}if(r.charAt(9)==="X"){o+=10*10}else{o+=10*r.charAt(9)}if(o%11===0){return r}}else if(n==="13"){if(!s.test(r)){return false}var a=[1,3];for(u=0;u<12;u++){o+=a[u%2]*r.charAt(u)}if(r.charAt(12)-(10-o%10)%10===0){return r}}return false};e.ltrim=function(e,t){var n=t?new RegExp("^["+t+"]+","g"):/^\s+/g;return e.replace(n,"")};e.rtrim=function(e,t){var n=t?new RegExp("["+t+"]+$","g"):/\s+$/g;return e.replace(n,"")};e.trim=function(e,t){var n=t?new RegExp("^["+t+"]+|["+t+"]+$","g"):/^\s+|\s+$/g;return e.replace(n,"")};e.escape=function(e){return e.replace(/&/g,"&").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};e.whitelist=function(e,t){return e.replace(new RegExp("[^"+t+"]+","g"),"")};e.blacklist=function(e,t){return e.replace(new RegExp("["+t+"]+","g"),"")};for(var m in e){if(m==="toString"||m==="toDate"||typeof e[m]!=="function"){continue}(function(t){var n=e[t];e[t]=function(){var t=Array.prototype.slice.call(arguments);t[0]=e.toString(t[0]);return n.apply(e,t)}})(m)}return e});var Validity={version:"0.1.0"};Validity.validate=function(e,t,n){t=typeof t==="undefined"?Validity.setErrorState:t;n=typeof n==="undefined"?Validity.clearErrorState:n;var r=true;var i=document.getElementById(e);var s=i.getElementsByTagName("input");var o=Array.prototype.slice.call(s);Validity.clearErrorStates(e,n);o.forEach(function(e){var n=e.getAttribute("data-validate");n=JSON.parse(n);if(n){for(var i in n){var s=Validity.processValidation(i,e);if(!s){t(e,n[i])}r=r&&s}}});return r};Validity.displayServerErrors=function(e,t,n,r){n=typeof n==="undefined"?Validity.setErrorState:n;r=typeof r==="undefined"?Validity.clearErrorState:r;var i=document.getElementById(e);var s=i.getElementsByTagName("input");var o=Array.prototype.slice.call(s);Validity.clearErrorStates(e,r);o.forEach(function(e){var r=e.getAttribute("data-error");r=JSON.parse(r);if(r){for(var i in r){if(t.indexOf(i)>-1){n(e,r[i])}}}})};Validity.processValidation=function(e,t){var n=true;switch(e){case"required":n=t.value.length>0;break;case"email":n=validator.isEmail(t.value);break;case"URL":n=validator.isURL(t.value);break;case"IP":n=validator.isIP(t.value);break;case"alpha":n=validator.isAlpha(t.value);break;case"numeric":n=validator.isNumeric(t.value);break;case"alphanumeric":n=validator.isAlphanumeric(t.value);break;case"hexadecimal":n=validator.isHexadecimal(t.value);break;case"hexColor":n=validator.isHexColor(t.value);break;case"lowercase":n=validator.isLowercase(t.value);break;case"uppercase":n=validator.isUppercase(t.value);break;case"int":n=validator.isInt(t.value);break;case"float":n=validator.isFloat(t.value);break;case"date":n=validator.isDate(t.value);break;case"creditCard":n=validator.isCreditCard(t.value);break;default:n=false;console.error("Error: Unrecognized validation type: "+e+" on element: "+t);break}return n};Validity.clearErrorStates=function(e,t){t=typeof t==="undefined"?Validity.clearErrorState:t;var n=document.getElementById(e);var r=n.getElementsByTagName("input");var i=Array.prototype.slice.call(r);i.forEach(function(e){t(e)})};Validity.setErrorState=function(e,t){console.error("Error on element: "+e+" with message: "+t);var n=e.parentNode;n.classList.add("has-error");if(n.firstChild.tagName=="LABEL"){n.firstChild.innerHTML=t}else{var r=document.createElement("label");r.setAttribute("for",e.id);r.innerHTML=t;r.classList.add("control-label");n.insertBefore(r,n.firstChild)}};Validity.clearErrorState=function(e){var t=e.parentNode;t.classList.remove("has-error");if(t.firstChild.tagName=="LABEL"){t.removeChild(t.firstChild)}}